<html>
<head>
<script src="brython.js"></script>
<script src="brython_stdlib.js"></script>
<script type="text/python">
from browser import document, html, alert

def display(text):
	document["display"].clear()
	document["display"].html = text

def display2(id, text):
	document[id].html = document[id].html + text

#---------------------------------

import random

cartes = ["C1", "CR", "CD", "CV", "CX", "C9", "C8", "C7"]
random.shuffle(cartes)

#for n2 in range(0,len(cartes)):
#	document["score"].html = document["score"].html + cartes[n2]

# on affiche la premiere cartes
display("<img src='" + cartes[0] + ".png' width='400' />")

n = 0
def cartes_obo():
	global cartes, n
	n = n + 1
	if n == 8:
		document['cartes'].style.display = 'inline'
		document['display'].style.display = 'none'
	else:
		display("<img src='" + cartes[n] + ".png' width='400' />")

i = 0
selected = []
def cartes_select(ev):
	global i, select
	if i != 0 and (str(ev.target.dataid) == selected[-1]):
		#unselect the last selection
		document[ev.target.dataid + '_pos'].clear()
		ev.target.style.opacity = '1'
		ev.target.style.cursor = 'pointer'
		del selected[-1]
		i = i - 1
	else:
		if str(ev.target.dataid) not in selected:
			selected.append(str(ev.target.dataid))
			i = i + 1
			document[ev.target.dataid + '_pos'].html = "<img src='" + str(i) + ".png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' />"
			ev.target.style.opacity = '0.2'
			ev.target.style.cursor = 'not-allowed'


	document["select"].html = selected[-1]

def score():
	global selected, cartes
	for n1 in range(0,len(selected)):
		document["score"].html = document["score"].html + selected[n1]

	document["score"].html = document["score"].html + '<br />'

	for n2 in range(0,len(cartes)):
		document["score"].html = document["score"].html + cartes[n2]

	points = 0
	for n3 in range(0,len(cartes)):
		if selected[n3] == cartes[n3]:
			points = points + 1

	document["score"].html = document["score"].html + '<br />'
	document["score"].html = document["score"].html + str(points)

document['display'].bind('click',cartes_obo)
document['cartes'].bind('click',cartes_select)
document['submit'].bind('click',score)
</script>
</head>

<body onload="brython()">

<div id="display" style="display:inline"></div>

<div id="cartes" style="display:none">
	<div id='C1' style='float:left;'><div id='C1_pos' style='position:absolute;'></div><img dataid='C1' src='C1.png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' /></div>
	<div id='CR' style='float:left;'><div id='CR_pos' style='position:absolute;'></div><img dataid='CR' src='CR.png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' /></div>
	<div id='CD' style='float:left;'><div id='CD_pos' style='position:absolute;'></div><img dataid='CD' src='CD.png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' /></div>
	<div id='CV' style='float:left;'><div id='CV_pos' style='position:absolute;'></div><img dataid='CV' src='CV.png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' /></div>
	<div id='CX' style='float:left;'><div id='CX_pos' style='position:absolute;'></div><img dataid='CX' src='CX.png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' /></div>
	<div id='C9' style='float:left;'><div id='C9_pos' style='position:absolute;'></div><img dataid='C9' src='C9.png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' /></div>
	<div id='C8' style='float:left;'><div id='C8_pos' style='position:absolute;'></div><img dataid='C8' src='C8.png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' /></div>
	<div id='C7' style='float:left;'><div id='C7_pos' style='position:absolute;'></div><img dataid='C7' src='C7.png' style='cursor:pointer;pointer-events:auto;opacity:1' width='100' /></div>
</div>

<div id="select" style='clear:both'></div>
<div id="score" style='clear:both'></div>

<button id="submit" style='clear:both'>validate</div>

</body>
</html>
